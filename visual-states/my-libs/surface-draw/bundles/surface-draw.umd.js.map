{"version":3,"file":"surface-draw.umd.js","sources":["../../../projects/surface-draw/src/lib/surface-data.ts","../../../projects/surface-draw/src/lib/viewcontrol.ts","../../../projects/surface-draw/src/lib/surface-draw.service.ts","../../../node_modules/tslib/tslib.es6.js","../../../projects/surface-draw/src/lib/surface-draw.component.ts","../../../projects/surface-draw/src/lib/surface-draw.module.ts","../../../projects/surface-draw/src/public-api.ts","../../../projects/surface-draw/src/surface-draw.ts"],"sourcesContent":["import { Point } from 'my-libs/base-geometry';\r\nimport { ISurfaceDraw } from 'my-libs/base-draw';\r\n\r\nexport class SurfaceData {\r\n  constructor(public screenPoint: Point, public modelPoint: Point,\r\n              public surface: ISurfaceDraw,\r\n              public event: any, public stateEvent: any) {\r\n  }\r\n}\r\n","export class ViewControl {\r\n  public scale = 1.0;\r\n  public offsetX = 0.0;\r\n  public offsetY = 0.0;\r\n  public width = 0.0;\r\n  public height = 0.0;\r\n  public switch = false;\r\n\r\n  public zoomIn(): void {\r\n    this.scale /= 0.80;\r\n  }\r\n\r\n  public zoomOut(): void {\r\n    this.scale *= 0.80;\r\n  }\r\n\r\n  public translateXPlus(): void {\r\n    this.offsetX += 25;\r\n  }\r\n\r\n  public translateXMinus(): void {\r\n    this.offsetX -= 25;\r\n  }\r\n\r\n  public translateYPlus(): void {\r\n    this.offsetY += 25;\r\n  }\r\n\r\n  public translateYMinus(): void {\r\n    this.offsetY -= 25;\r\n  }\r\n\r\n  public invalidate(): void {\r\n    this.switch = !this.switch;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class SurfaceDrawService {\n\n  constructor() { }\n}\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import { Component, OnInit, ViewChild, Input, Output, EventEmitter, ElementRef, AfterViewInit, OnChanges, HostListener } from '@angular/core';\nimport { ISurfaceDraw, IDrawable, IPoint } from 'my-libs/base-draw';\nimport { Point } from 'my-libs/base-geometry';\nimport { SurfaceData } from './surface-data';\n\n@Component({\n  selector: 'lib-surface-draw',\n  template: `\n  <div #divElement class=\"div-root\">\n    <canvas #myCanvas class=\"canvas-main\">\n    </canvas>\n  </div>\n  `,\n  styles: [`\n  .canvas-main {\n    touch-action: none !important;\n  }\n\n  .div-root {\n    position: fixed;\n    width: 100%;\n    height: 100%;\n  }\n  `]\n})\nexport class SurfaceDrawComponent implements OnInit, OnChanges, AfterViewInit, ISurfaceDraw {\n  @ViewChild('myCanvas', { static: true }) canvasRef: ElementRef;\n  @ViewChild('divElement', { static: true }) divElement: any;\n\n  @Input() drawItems: IDrawable[];\n\n  private offscreenCanvas: HTMLCanvasElement;\n\n  private scaleValue = 1;\n  private offsetXValue = 0;\n  private offsetYValue = 0;\n  private widthValue = 0;\n  private heightValue = 0;\n  private switchValue = false;\n\n  @Input() drawAxises = false;\n\n  @Output() scaleChange = new EventEmitter();\n  @Output() offsetXChange = new EventEmitter();\n  @Output() offsetYChange = new EventEmitter();\n  @Output() widthChange = new EventEmitter();\n  @Output() heightChange = new EventEmitter();\n\n  private center: Point = new Point(0, 0);\n  private pointerPosition: Point = new Point(0, 0);\n\n  private context: CanvasRenderingContext2D;\n  private canvasValid = false;\n  // private lastRefreshHandle: number;\n  // private cancelRefreshCounter: number = 0;\n\n  private isPan = false;\n\n  @Output() down: EventEmitter<SurfaceData> = new EventEmitter<SurfaceData>();\n  @Output() move: EventEmitter<SurfaceData> = new EventEmitter<SurfaceData>();\n  @Output() up: EventEmitter<SurfaceData> = new EventEmitter<SurfaceData>();\n  @Output() wheelRotate: EventEmitter<SurfaceData> = new EventEmitter<SurfaceData>();\n  // @Output() click: EventEmitter<Point> = new EventEmitter<Point>();\n\n  private stateEvent: any = null;\n\n  constructor() { }\n\n  @Input()\n  set scale(val) {\n    if (this.scaleValue !== val) {\n      this.scaleValue = val;\n      this.scaleChange.emit(this.scaleValue);\n    }\n  }\n\n  get scale(): number {\n    return this.scaleValue;\n  }\n\n  @Input()\n  set offsetX(val) {\n    if (this.offsetXValue !== val) {\n      this.offsetXValue = val;\n      this.offsetXChange.emit(this.offsetXValue);\n    }\n  }\n\n  get offsetX(): number {\n    return this.offsetXValue;\n  }\n\n  @Input()\n  set offsetY(val) {\n    if (this.offsetXValue !== val) {\n      this.offsetYValue = val;\n      this.offsetYChange.emit(this.offsetYValue);\n    }\n  }\n\n  get offsetY(): number {\n    return this.offsetYValue;\n  }\n\n  get width(): number {\n    return this.widthValue;\n  }\n\n  @Input()\n  set width(val) {\n    if (this.widthValue !== val) {\n      this.widthValue = val;\n      this.widthChange.emit(this.widthValue);\n    }\n  }\n\n  get height(): number {\n    return this.heightValue;\n  }\n\n  @Input()\n  set height(val) {\n    if (this.heightValue !== val) {\n      this.heightValue = val;\n      this.heightChange.emit(this.heightValue);\n    }\n  }\n\n  @Input()\n  set switch(val) {\n    if (this.switchValue !== val) {\n      this.switchValue = val;\n      this.invalidateDrawing();\n    }\n  }\n\n  get switch(): boolean {\n    return this.switchValue;\n  }\n\n  get mousePosition(): IPoint {\n    return this.pointerPosition;\n  }\n\n  ngOnInit(): void {\n    this.offscreenCanvas = document.createElement('canvas');\n    this.canvasValid = true;\n  }\n\n  ngAfterViewInit(): void {\n    // this.context = this.canvasRef.nativeElement.getContext('2d');\n    this.context = this.offscreenCanvas.getContext('2d', { alpha: false });\n    window.onresize = this.resizeCanvas.bind(this);\n    requestAnimationFrame(() => this.resizeCanvas(this.divElement));\n  }\n\n  private resizeCanvas(_: UIEvent): void {\n    const el: HTMLDivElement = this.divElement.nativeElement;\n    this.width = el.clientWidth;\n    this.height = el.clientHeight;\n    this.offscreenCanvas.width = this.width;\n    this.offscreenCanvas.height = this.height;\n    this.canvasRef.nativeElement.width = el.clientWidth;\n    this.canvasRef.nativeElement.height = el.clientHeight;\n    this.invalidateDrawing();\n  }\n\n\n  ngOnChanges(): void {\n    // this.context = this.canvasRef.nativeElement.getContext('2d');\n    if (this.offscreenCanvas) {\n      this.context = this.offscreenCanvas.getContext('2d', { alpha: false });\n      this.invalidateDrawing();\n    }\n  }\n\n  invalidateDrawing(): void {\n    if (this.canvasValid) {\n      this.canvasValid = false;\n      // this.cancelRefreshCounter++;\n      // if (this.cancelRefreshCounter < 10)\n      //  cancelAnimationFrame(this.lastRefreshHandle);\n      // else\n      //  this.cancelRefreshCounter = 0;\n      // this.lastRefreshHandle = requestAnimationFrame(() => this.drawOffscreen());\n      requestAnimationFrame(() => this.drawOffscreen());\n    }\n  }\n\n  line(x1: number, y1: number, x2: number, y2: number, strokeStyle: string = '#F3E5F5'): void {\n    this.context.strokeStyle = strokeStyle;\n    this.context.beginPath();\n    this.context.moveTo(this.toDeviceX(x1), this.toDeviceY(y1));\n    this.context.lineTo(this.toDeviceX(x2), this.toDeviceY(y2));\n    this.context.stroke();\n  }\n\n  polyline(points: IPoint[], strokeStyle: string = '#F3E5F5'): void {\n    this.context.strokeStyle = strokeStyle;\n    this.context.beginPath();\n    for (let i = 0; i < points.length; i++) {\n      if (i === 0) {\n        this.context.moveTo(this.toDeviceX(points[i].x), this.toDeviceY(points[i].y));\n      }\n      else {\n        this.context.lineTo(this.toDeviceX(points[i].x), this.toDeviceY(points[i].y));\n      }\n    }\n    this.context.stroke();\n  }\n\n  polygon(points: IPoint[], strokeStyle: string = '#F3E5F5', fillStyle?: string): void {\n    this.context.strokeStyle = strokeStyle;\n    this.context.beginPath();\n    for (let i = 0; i < points.length; i++) {\n      if (i === 0) {\n        this.context.moveTo(this.toDeviceX(points[i].x), this.toDeviceY(points[i].y));\n      }\n      else {\n        this.context.lineTo(this.toDeviceX(points[i].x), this.toDeviceY(points[i].y));\n      }\n    }\n    this.context.closePath();\n\n    if (fillStyle) {\n      const oldFill = this.context.fillStyle;\n      this.context.fillStyle = fillStyle;\n      this.context.fill();\n      this.context.fillStyle = oldFill;\n    }\n\n    this.context.stroke();\n  }\n\n  bezierCurve(x1: number, y1: number, cp1x: number, cp1y: number, cp2x: number, cp2y: number, x2: number, y2: number, strokeStyle: string = '#F3E5F5'): void {\n    this.context.strokeStyle = strokeStyle;\n    this.context.beginPath();\n    this.context.moveTo(this.toDeviceX(x1), this.toDeviceY(y1));\n    this.context.bezierCurveTo(this.toDeviceX(cp1x), this.toDeviceY(cp1y),\n      this.toDeviceX(cp2x), this.toDeviceY(cp2y), this.toDeviceX(x2), this.toDeviceY(y2));\n    this.context.stroke();\n  }\n\n  rect(x1: number, y1: number, w: number, h: number, strokeStyle: string = '#F3E5F5'): void {\n    this.context.strokeStyle = strokeStyle;\n    const width = this.toDeviceScale(w);\n    const height = this.toDeviceScale(h);\n    this.context.strokeRect(this.toDeviceX(x1), this.toDeviceY(y1) - height, width, height);\n  }\n\n  text(text: string, x: number, y: number, font: string = null, strokeStyle: string = '#F3E5F5'): void {\n    x = this.toDeviceX(x);\n    y = this.toDeviceY(y);\n    /// color for background\n    this.context.fillStyle = '#303030';\n    /// get width of text\n    const oldFont = this.context.font;\n    if (font) {\n      this.context.font = font;\n    }\n    const width = this.context.measureText(text).width;\n    /// draw background rect assuming height of font\n    this.context.fillRect(x - width / 2.0, y - 6, width, 12);\n\n    this.context.fillStyle = strokeStyle;\n    this.context.textBaseline = 'middle';\n    this.context.textAlign = 'center';\n    this.context.fillText(text, x, y, width);\n    if (font) {\n      this.context.font = oldFont;\n    }\n  }\n\n  image(img: ImageBitmap, x: number, y: number, width: number, height: number, scale: number): void {\n    x = this.toDeviceX(x);\n    y = this.toDeviceY(y);\n    width = this.toDeviceScale(width * scale);\n    height = this.toDeviceScale(height * scale);\n\n    this.context.drawImage(img, 0, 0, img.width, img.height, x, y - height, width, height);\n  }\n\n  fromDeviceScale(val: number): number {\n    return val / this.scale;\n  }\n\n  toDeviceScale(val: number): number {\n    return val * this.scale;\n  }\n\n  toDeviceX(val: number): number {\n    return this.center.x +\n      this.toDeviceScale(this.offsetX) +\n      this.toDeviceScale(val);\n  }\n\n  toDeviceY(val: number): number {\n    return this.center.y -\n      this.toDeviceScale(this.offsetY) -\n      this.toDeviceScale(val);\n  }\n\n  getCenter(): Point {\n    const el: HTMLDivElement = this.divElement.nativeElement;\n    const centerX = el.clientWidth / 2.0 - el.offsetLeft / 2.0;\n    const centerY = el.clientHeight / 2.0 - el.offsetTop / 2.0;\n    return new Point(centerX, centerY);\n  }\n\n  drawData(): void {\n    if (this.offscreenCanvas.width > 0 && this.offscreenCanvas.height > 0) {\n      const ctx = this.canvasRef.nativeElement.getContext('2d', { alpha: false });\n      ctx.clearRect(0, 0, this.width, this.height);\n      ctx.drawImage(this.offscreenCanvas, 0, 0);\n    }\n  }\n\n  drawOffscreen(): void {\n    if (!this.canvasValid) {\n      this.canvasValid = true;\n      this.center = this.getCenter();\n\n      this.context.lineWidth = 1;\n      this.context.clearRect(0, 0, this.context.canvas.width, this.context.canvas.height);\n      this.context.fillStyle = '#303030';\n      this.context.fillRect(0, 0, this.context.canvas.width, this.context.canvas.height);\n\n      if (this.drawItems != null) {\n        for (const entry of this.drawItems) {\n          if (entry.getLayer() < 0) {\n            entry.draw(this);\n          }\n        }\n      }\n\n      this.drawGrid();\n\n      if (this.drawItems != null) {\n        for (const entry of this.drawItems) {\n          if (entry.getLayer() >= 0) {\n            entry.draw(this);\n          }\n        }\n      }\n\n      this.drawVerticalRuler();\n      this.drawHorizontalRuler();\n\n      requestAnimationFrame(() => this.drawData());\n    }\n  }\n\n  toLogical(point: Point): Point {\n    const result = new Point(point.x, point.y);\n\n    result.x = this.fromDeviceScale(point.x) -\n      this.offsetX -\n      this.fromDeviceScale(this.center.x);\n\n    result.y = -(this.fromDeviceScale(point.y - this.center.y) + this.offsetY);\n\n    return result;\n  }\n\n  drawHorizontalRuler(): void {\n    const center = new Point(this.center.x, this.center.y);\n    center.x += this.toDeviceScale(this.offsetX);\n    center.y -= this.toDeviceScale(this.offsetY);\n    let step = this.toDeviceScale(10);\n\n    while (step < 5) {\n      step /= 0.40;\n    }\n\n    while (step > 15) {\n      step *= 0.40;\n    }\n\n    this.context.lineWidth = 0.25;\n    this.context.strokeStyle = '#FFFFFF';\n    this.context.beginPath();\n\n    let len = 10;\n    let cnt = 0;\n\n    for (let x = center.x; x >= 0; x -= step) {\n      this.context.moveTo(x, 10);\n      this.context.lineTo(x, len + 10);\n\n      cnt++;\n      if (len === 10) {\n        this.drawRulerText(x, 0, true);\n        cnt = 0;\n        len = 5;\n      } else if (cnt >= 4) {\n        len = 10;\n      }\n    }\n\n    len = 5;\n    cnt = 0;\n\n    for (let x = center.x + step; x <= this.context.canvas.width; x += step) {\n      this.context.moveTo(x, 10);\n      this.context.lineTo(x, len + 10);\n\n      cnt++;\n      if (len === 10) {\n        this.drawRulerText(x, 0, true);\n        cnt = 0;\n        len = 5;\n      } else if (cnt >= 4) {\n        len = 10;\n      }\n    }\n\n    this.context.closePath();\n    this.context.stroke();\n  }\n\n  drawVerticalRuler(): void {\n    const center = new Point(this.center.x, this.center.y);\n    center.x += this.toDeviceScale(this.offsetX);\n    center.y -= this.toDeviceScale(this.offsetY);\n    let step = this.toDeviceScale(10);\n\n    while (step < 5) {\n      step /= 0.40;\n    }\n\n    while (step > 15) {\n      step *= 0.40;\n    }\n\n    this.context.lineWidth = 0.25;\n    this.context.strokeStyle = '#FFFFFF';\n\n    this.context.beginPath();\n\n    let len = 10;\n    let cnt = 0;\n\n    for (let y = center.y; y >= 0; y -= step) {\n      this.context.moveTo(0, y);\n      this.context.lineTo(len, y);\n\n      cnt++;\n      if (len === 10) {\n        this.drawRulerText(12, y, false);\n        cnt = 0;\n        len = 5;\n      } else if (cnt >= 4) {\n        len = 10;\n      }\n    }\n\n    len = 5;\n    cnt = 0;\n\n    for (let y = center.y + step; y <= this.context.canvas.height; y += step) {\n      this.context.moveTo(0, y);\n      this.context.lineTo(len, y);\n\n      cnt++;\n      if (len === 10) {\n        this.drawRulerText(12, y, false);\n        cnt = 0;\n        len = 5;\n      } else if (cnt >= 4) {\n        len = 10;\n      }\n    }\n\n    this.context.closePath();\n    this.context.stroke();\n  }\n\n  drawRulerText(x: number, y: number, horizontal: boolean): void {\n    const logicalPt = this.toLogical(new Point(x, y));\n    const text = horizontal ? Math.round(logicalPt.x).toString() : Math.round(logicalPt.y).toString();\n\n    ///// color for background\n    // this.context.fillStyle = '#303030';\n    ///// get width of text\n    const width = this.context.measureText(text).width;\n    ///// draw background rect assuming height of font\n    // this.context.fillRect(x - width / 2.0, y - 6, width, 12);\n\n    this.context.fillStyle = '#FFFFFF4A';\n    if (horizontal) {\n      this.context.textBaseline = 'top';\n    }\n    else {\n      this.context.textBaseline = 'middle';\n    }\n\n    if (horizontal) {\n      this.context.textAlign = 'center';\n    }\n    else {\n      this.context.textAlign = 'start';\n    }\n\n    this.context.fillText(text, x, y, width);\n  }\n\n  drawGrid(): void {\n    const center = new Point(this.center.x, this.center.y);\n    center.x += this.toDeviceScale(this.offsetX);\n    center.y -= this.toDeviceScale(this.offsetY);\n    let step = this.toDeviceScale(10);\n\n    while (step < 5) {\n      step /= 0.40;\n    }\n\n    while (step > 15) {\n      step *= 0.40;\n    }\n\n    this.context.lineWidth = 0.25;\n    this.context.strokeStyle = '#3C3C3C';\n    // this.context.strokeStyle = \"#FFFFFF\";\n    this.context.setLineDash([4, 2]);\n    this.context.beginPath();\n\n    for (let x = center.x; x >= 0; x -= step) {\n      this.context.moveTo(x, 0);\n      this.context.lineTo(x, this.context.canvas.height);\n    }\n\n    for (let x = center.x + step; x <= this.context.canvas.width; x += step) {\n      this.context.moveTo(x, 0);\n      this.context.lineTo(x, this.context.canvas.height);\n    }\n\n    for (let y = center.y; y >= 0; y -= step) {\n      this.context.moveTo(0, y);\n      this.context.lineTo(this.context.canvas.width, y);\n    }\n\n    for (let y = center.y + step; y <= this.context.canvas.height; y += step) {\n      this.context.moveTo(0, y);\n      this.context.lineTo(this.context.canvas.width, y);\n    }\n\n    this.context.closePath();\n    this.context.stroke();\n\n    step = step * 5;\n    this.context.lineWidth = 0.5;\n    this.context.strokeStyle = '#3C3C3C';\n    this.context.beginPath();\n\n    const hw = 0.5;\n    const w = 1;\n\n    for (let x = center.x; x >= 0; x -= step) {\n      for (let y = center.y; y >= 0; y -= step) {\n        this.context.strokeRect(x - hw, y - hw, w, w);\n      }\n\n      for (let y = center.y + step; y <= this.context.canvas.height; y += step) {\n        this.context.strokeRect(x - hw, y - hw, w, w);\n      }\n    }\n\n    for (let x = center.x + step; x <= this.context.canvas.width; x += step) {\n      for (let y = center.y; y >= 0; y -= step) {\n        this.context.strokeRect(x - hw, y - hw, w, w);\n      }\n\n      for (let y = center.y + step; y <= this.context.canvas.height; y += step) {\n        this.context.strokeRect(x - hw, y - hw, w, w);\n      }\n    }\n\n    this.context.closePath();\n    this.context.stroke();\n    this.context.setLineDash([]);\n\n    // this.context.strokeStyle = \"#000000\";\n    // this.context.lineWidth = 1;\n    // this.context.beginPath();\n\n    // this.context.strokeRect(center.x - 2, center.y - 2, 4, 4);\n    // this.context.stroke();\n\n    if (this.drawAxises) {\n      this.drawCoordinateSystem();\n    }\n  }\n\n  private drawCoordinateSystem(): void {\n    const calcHeight = this.height - this.divElement.nativeElement.offsetTop;\n\n    this.context.lineWidth = 1;\n    this.context.strokeStyle = '#00BFA5';\n    this.context.beginPath();\n    this.context.moveTo(40, calcHeight - 40);\n    this.context.lineTo(40, calcHeight - 140);\n    this.context.lineTo(45, calcHeight - 135);\n    this.context.lineTo(35, calcHeight - 135);\n    this.context.lineTo(40, calcHeight - 140);\n    this.context.stroke();\n\n    this.context.lineWidth = 1;\n    this.context.strokeStyle = '#0091EA';\n    this.context.beginPath();\n    this.context.moveTo(40, calcHeight - 40);\n    this.context.lineTo(140, calcHeight - 40);\n    this.context.lineTo(135, calcHeight - 35);\n    this.context.lineTo(135, calcHeight - 45);\n    this.context.lineTo(140, calcHeight - 40);\n    this.context.stroke();\n  }\n\n  @HostListener('mousedown', ['$event'])\n  onMousedown(event): void {\n    if (this.isPan) {\n      return;\n    }\n    const pt = new Point(event.clientX, event.clientY - this.divElement.nativeElement.offsetTop);\n    this.stateEvent = event;\n    const sd = new SurfaceData(pt, this.toLogical(pt), this, event, this.stateEvent);\n    this.down.emit(sd);\n  }\n\n  @HostListener('mousemove', ['$event'])\n  onMousemove(event: MouseEvent): void {\n    if (this.isPan) {\n      return;\n    }\n    const pt = new Point(event.clientX, event.clientY - this.divElement.nativeElement.offsetTop);\n    const sd = new SurfaceData(pt, this.toLogical(pt), this, event, this.stateEvent);\n    this.pointerPosition = sd.modelPoint;\n    this.move.emit(sd);\n  }\n\n  @HostListener('mouseup', ['$event'])\n  onMouseup(event: MouseEvent): void {\n    if (this.isPan) {\n      return;\n    }\n    const pt = new Point(event.clientX, event.clientY - this.divElement.nativeElement.offsetTop);\n    const sd = new SurfaceData(pt, this.toLogical(pt), this, event, this.stateEvent);\n    this.up.emit(sd);\n    this.stateEvent = event;\n  }\n\n  @HostListener('touchstart', ['$event'])\n  protected onPanStart(event): void {\n    if (event.touches && event.touches.length > 0) {\n      this.isPan = true;\n      this.stateEvent = event;\n      event.preventDefault();\n      const touch = event.touches[0];\n      const pt = new Point(touch.clientX, touch.clientY - this.divElement.nativeElement.offsetTop);\n      const sd = new SurfaceData(pt, this.toLogical(pt), this, event, this.stateEvent);\n      this.down.emit(sd);\n    }\n  }\n\n  @HostListener('touchmove', ['$event'])\n  protected onPanMove(event): void {\n    if (event.touches && event.touches.length > 0) {\n      event.preventDefault();\n      const touch = event.touches[0];\n      const pt = new Point(touch.clientX, touch.clientY - this.divElement.nativeElement.offsetTop);\n      const sd = new SurfaceData(pt, this.toLogical(pt), this, event, this.stateEvent);\n      this.move.emit(sd);\n    }\n  }\n\n  @HostListener('touchend', ['$event'])\n  protected onPanEnd(event): void {\n    if (event.changedTouches && event.changedTouches.length > 0) {\n      this.isPan = false;\n      event.preventDefault();\n      const touch = event.changedTouches[0];\n      const pt = new Point(touch.clientX, touch.clientY - this.divElement.nativeElement.offsetTop);\n      const sd = new SurfaceData(pt, this.toLogical(pt), this, event, this.stateEvent);\n      this.up.emit(sd);\n      this.stateEvent = event;\n    }\n  }\n\n  @HostListener('mousewheel', ['$event'])\n  onMousewheel(event): void {\n    const pt = new Point(event.clientX, event.clientY - this.divElement.nativeElement.offsetTop);\n    const sd = new SurfaceData(pt, this.toLogical(pt), this, event, this.stateEvent);\n    this.wheelRotate.emit(sd);\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { SurfaceDrawComponent } from './surface-draw.component';\n\n@NgModule({\n  declarations: [SurfaceDrawComponent],\n  imports: [\n  ],\n  exports: [SurfaceDrawComponent]\n})\nexport class SurfaceDrawModule { }\n","/*\n * Public API Surface of surface-draw\n */\n\nexport * from './lib/surface-data';\nexport * from './lib/viewcontrol';\nexport * from './lib/surface-draw.service';\nexport * from './lib/surface-draw.component';\nexport * from './lib/surface-draw.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["Injectable","EventEmitter","Point","i0.ɵɵelementStart","i0.ɵɵelement","i0.ɵɵelementEnd","Component","ViewChild","Input","Output","HostListener","NgModule"],"mappings":"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"}